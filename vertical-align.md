#### `vertical-align` 
`vertical-align` 控制行内元素或行内块级元素在**行盒（line box）**内的垂直对齐位置。

**行盒与高度的关系**  

1. - **无内容时**：`div` 无高度，因无支撑元素。  
   - **有内容时**：高度由内容撑起，而撑起的本质是**行高（line-height）**。  
   - **行高作用**：行盒（line box）会包裹每行内容，行高确保文字等行内元素被完整包含，进而撑起父容器（如 `div`）高度。
   
2. **深入思考：复杂内容的行盒包裹规律**  
   当 `div` 内包含文字、图片、`inline-block` 元素，甚至涉及 `margin` 等属性时，行盒如何处理？  
   - **核心规律**：行盒始终确保包裹当前行所有内容，其高度由最高元素决定，对齐方式则由 `vertical-align` 控制。

#### **不同场景下的行盒行为分析**
假设红色框为包裹的 `div`，以下为典型场景：  
1. **仅文字**：行盒按文字的行高完整包裹，高度由 `line-height` 决定。  
2. **文字+图片**：行盒以最高元素（通常为图片）为基准，文字按 `vertical-align` 对齐。  
3. **文字+图片+较大 `inline-block`**：行盒高度由最大元素（`inline-block`）决定，其余元素对齐方式受 `vertical-align` 影响。  
4. **文字+图片+较大 `inline-block`+`margin-bottom`**：行盒仍包裹所有内容，`margin-bottom` 可能影响 `inline-block` 的基准线位置。  
5. **文字+图片+较大 `inline-block`+`margin-bottom`+更多文字**：行盒综合考虑所有元素，高度由最高者决定，对齐仍以基准线为参考。

#### **关键：`vertical-align` 的默认值与基线（baseline）**
- **结论**：行盒始终完整包裹行内内容，而对齐的“千奇百怪”源于**基线（baseline）**的默认对齐规则。  
- **基线定义**：  
  - 文字：字母 `x` 的下边缘。  
  - `inline-block` 无文字：`margin-bottom` 底部（无 `margin` 则为盒子底部）。  
  - `inline-block` 有文字：最后一行文字的 `x` 下边缘。  
- **规律**：默认 `vertical-align: baseline` 使元素基于各自基线对齐，解释了常见对齐现象。

#### **`vertical-align` 其他取值解析**
理解基线后，其他值逻辑清晰：  
- **`top`**：元素顶部与行盒顶部对齐。  
- **`middle`**：元素中心点与父盒基线加 `x-height` 一半对齐。  
- **`bottom`**：元素底部与行盒底部对齐。  
- **`<percentage>`**：相对于 `line-height` 计算升降距离，`0%` 等同基线。  
- **`<length>`**：固定距离升降，`0cm` 等同基线。  

#### **实战应用：消除图片底部间隙**
图片下方常出现由基线对齐导致的间隙，解决方法：  
1. 设置 `vertical-align: top/middle/bottom`，打破基线对齐。  
2. 将图片转为 `block` 元素，脱离行盒规则。

#### **总结**
`vertical-align` 的核心是基线对齐与行盒包裹规律。掌握基线定义及其它取值逻辑，即可灵活应对各种布局场景，轻松解决对齐难题。