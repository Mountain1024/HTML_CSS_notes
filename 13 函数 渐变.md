# CSS 函数

## CSS 中的函数

CSS 函数是预定义的工具方法，用于动态计算和生成 CSS 属性值，通常与 CSS 属性搭配使用。它们接受参数并返回计算结果，可用于设置颜色、尺寸、变换效果等样式。

- **作用**：增强样式的灵活性和动态性。
- **特点**：通过参数化输入，输出特定类型的 CSS 值。
- **常见示例**：`rgb()`、`calc()`、`var()` 等。

## CSS 自定义属性（变量）

### `var()` 函数

`var()` 用于引用 CSS 自定义属性（变量），实现样式复用和动态控制。

- **定义方式**：
  - 属性名以 `--` 开头，定义在选择器内。
  - 值可以是任意有效的 CSS 值。
  - 作用域限于定义的选择器及其子元素。
  - 建议在 `:root`（全局作用域）或 `html` 选择器中定义变量以实现全局使用。

- **用法**：
  - 基本形式：`var(--variable-name)`。
  - 支持默认值：`var(--variable-name, default-value)`，当变量未定义时使用默认值。

- **示例**：

  ```css
  /* 定义变量 */
  :root {
    --primary-color: #3498db;
    --spacing-unit: 8px;
  }
  
  /* 使用变量 */
  .element {
    color: var(--primary-color);
    margin: var(--spacing-unit);
  }
  
  /* 带默认值 */
  .element {
    font-size: var(--font-size, 16px); /* 未定义 --font-size 时使用 16px */
  }
  ```

#### 实际应用场景

- **主题切换**（如深色模式）
- **统一设计系统**（品牌色、间距、字体等）
- **响应式布局**（动态调整间距、尺寸）

## 颜色函数

颜色函数用于定义和操作颜色。

- `rgb(r, g, b)`：定义 RGB 颜色，范围 0-255。

- `rgba(r, g, b, a)`：增加透明度（`a` 范围 0-1）。

- `hsl(h, s, l)`：
  使用色相（`h`）、饱和度（`s`）和亮度（`l`）定义颜色。

  - **示例**：`hsl(120, 100%, 50%)`（绿色）

- `hsla(h, s, l, a)`：
  增加透明度。

  **示例**：`hsla(120, 100%, 50%, 0.3)`（半透明绿色）

---

## 单位与计算函数

处理尺寸、位置等数值计算，适用于响应式设计和动态布局。

### 3.1 `calc()`

- **作用：** 可执行加、减、乘、除运算，并允许不同单位混合计算。
- **注意事项：** 运算符两侧必须有空格。
- **示例：**

```css
width: calc(100% - 50px); /* 视口宽度减去 50px */
```

### 3.2 `min()` & `max()`

- `min(a, b)`: 取较小值
- `max(a, b)`: 取较大值

```css
width: min(50vw, 400px); /* 取 50vw 和 400px 中的较小值 */
height: max(200px, 30vh); /* 取 200px 和 30vh 中的较大值 */
```

### 3.3 `clamp()`

将值限制在 `min` 和 `max` 之间。

```css
font-size: clamp(14px, 4vw, 24px); /* 介于 14px 和 24px 之间 */
```

---

## 变换函数（`transform`）

通过 `transform` 属性，可以实现 2D 或 3D 变换效果，常用于动画、特效和布局调整。

### 常见 2D 变换函数

- **`translate(x, y)`**
   实现元素的平移。
   **示例：** `transform: translate(50px, 20px);` 表示水平方向移动 50px，垂直方向移动 20px。

- **`scale(x, y)`**
   缩放元素，`x` 和 `y` 分别表示水平和垂直缩放比例。
   **示例：** `transform: scale(1.5, 0.8);` 表示宽度放大 1.5 倍，高度缩小至 0.8 倍。
- **`rotate(angle)`**
   旋转元素，角度可使用 `deg`、`rad` 或 `turn`。
   **示例：** `transform: rotate(90deg);` 表示顺时针旋转 90 度。
- **`skew(x-angle, y-angle)`**
   倾斜元素，使其沿 X 轴和 Y 轴分别产生斜切效果。
   **示例：** `transform: skew(15deg, 5deg);` 表示 X 轴倾斜 15 度，Y 轴倾斜 5 度。

### 常见 3D 变换函数

- **`translate3d(x, y, z)`**  
  3D 平移。  
  - 示例：`transform: translate3d(10px, 20px, 30px)`（沿 X、Y、Z 轴移动）。

- **`rotate3d(x, y, z, angle)`**  
  3D 旋转，绕指定向量旋转。  
  - 示例：`transform: rotate3d(1, 0, 0, 45deg)`（绕 X 轴旋转 45 度）。

---

## 渐变函数

渐变函数常用于背景（`background`）、边框图像（`border-image`）等，能够创建平滑的颜色过渡效果。

### 线性渐变

- **`linear-gradient(direction, color1, color2, ...)`**
   可指定渐变方向（如角度或关键词），并设置多个颜色节点。
   **示例：**

  ```css
  background: linear-gradient(to bottom right, #ff0000, #0000ff);
  ```

  表示从左上角红色平滑过渡到右下角蓝色。

### 径向渐变

- **`radial-gradient(shape size at position, color1, color2, ...)`**
   从中心向外辐射形成渐变，支持指定形状（circle/ellipse）、大小和位置。
   **示例：**

  ```css
  background: radial-gradient(circle at center, #fff, #000);
  ```

  表示中心为白色，向外渐变为黑色。

### 圆锥渐变

- **`conic-gradient(from angle at position, color1, color2, ...)`**
   以中心点为旋转轴，颜色沿圆周分布形成渐变效果。
   **示例：**

  ```css
  background: conic-gradient(from 0deg, red, yellow, green);
  ```

  表示从 0 度起颜色依次过渡，形成圆锥形效果。

### 重复渐变

- **`repeating-linear-gradient()`**
   创建周期性重复的线性渐变。
   **示例：**

  ```css
  background: repeating-linear-gradient(45deg, blue, red 20px);
  ```

  表示每 20px 重复一次由蓝色到红色的渐变。

---

## 滤镜函数（`filter`）

滤镜函数主要用于图像处理，通过 `filter` 属性为元素添加视觉效果，如模糊、亮度调整等。

### 常用函数

- **`blur(radius)`**  
  模糊效果，半径越大越模糊。  
  - 示例：`filter: blur(3px)`（模糊半径 3px）。

- **`brightness(percentage)`**  
  调整亮度，100% 为原始亮度。  
  - 示例：`filter: brightness(120%)`（增加 20% 亮度）。

- **`contrast(percentage)`**  
   调整对比度，数值越高对比度越强。
  - 示例：`filter: contrast(150%)`（提升 50% 对比度）。

- **`grayscale(percentage)`**  
  转为灰度效果。  
  - 示例：`filter: grayscale(80%)`（80% 灰度）。

- **`opacity(percentage)`**  
  设置透明度。  
  - 示例：`filter: opacity(60%)`（透明度 60%）。

- **`hue-rotate(angle)`**  
   调整色相，旋转色轮上的角度。  
  - 示例：`filter: hue-rotate(180deg)`（色相旋转 180 度）。

- **`invert(percentage)`**  
   反转颜色，常用于生成反色效果。
  - 示例：`filter: invert(100%)`（完全反色）。

- **`saturate(percentage)`**  
   调整饱和度，超过 100% 表示增强颜色饱和度。
  - 示例：`filter: saturate(200%)`（饱和度加倍）。

---

## 其他常用 CSS 函数

- **`url()`**  
  引用外部资源，如图片或字体。  
  - 示例：`background-image: url('https://example.com/image.jpg')`。

- **`attr()`**  
  获取 HTML 属性值，常用于伪元素内容。  
  - 示例：  

    ```css
    div::after {
      content: attr(data-label);
    }
    ```

    HTML: `<div data-label="Hello">` 输出 "Hello"。

- **`counter()`**  
  用于实现自动编号功能，常见于列表、章节编号等场景。
  
  - 示例：  

    ```css
    body {
      counter-reset: section;
    }
    h2::before {
      counter-increment: section;
      content: "Section " counter(section) ". ";
    }
    ```
  
- **`env()`**  
  获取环境变量，常用于移动端适配（如安全区域内边距）。
  
  - 示例：`padding-top: env(safe-area-inset-top)`。

---

## 使用注意事项

- **参数格式：** 确保函数参数符合规范，如 `calc()` 运算符两侧需保留空格（例如 `100% - 20px`）。
- **嵌套使用：** CSS 函数支持嵌套使用，例如 `calc(var(--size) * 2)`，合理组合能实现更复杂的样式逻辑。
- **性能考量：** 复杂的计算、过度使用滤镜等可能影响渲染性能，应在实际开发中平衡效果与性能。
- **浏览器兼容性：** 部分 CSS 函数在旧版浏览器中的支持情况可能不一致，建议查阅最新兼容性文档并适当添加前缀或降级方案。

