# css 元素的定位

## 标准流(Normal Flow)

-  - 默认情况下，元素是按照 **标准流** （Normal Flow，也叫文档流）进行排布的。
    - 元素按顺序从 **上到下** 、**从左到右**  排列。
    - 在标准流中，元素的位置和顺序是由文档结构决定的，且元素之间 **不会发生层叠** 。
    - 元素的位置可以通过 `margin` 和 `padding` 调整，其中 `margin` 可以使用负值。
  
- 缺点是：
  -  设置一个元素的 `margin` 或 `padding`，可能会影响标准流中其他元素的布局效果。
  -  标准流不易实现元素层叠或重叠的效果。

如果希望某个元素跳出标准流，独立进行定位，就可以使用 `position` 属性进行设置

## 定位 Positioning

 定位允许您从正常的文档流布局中取出元素, 并使它们具有不同的行为:

- 例如放在另一个元素的上面

- 或者始终保持在浏览器视窗内的同一位置

![image-20231224164743622](./assets/image-20231224164743622.png)

### position 属性

- `position: static`（默认值）
- `position: relative`（相对定位）
- `position: absolute`（绝对定位）
- `position: fixed`（固定定位）
- `position: sticky`（粘性定位）

> position 属性可以让元素变成 **定位元素**
>
> - 定位元素(positioned element)
>
>   - position 值不为 static 的元素
>
>   - 也就是 position 值为 relative、absolute、fixed 的元素
>

特点: 

 - 可以设置宽度和高度（默认由内容决定）。
- 脱离标准流布局，不再严格遵循从上到下、从左到右的排布规则。
- 元素不再受“块级”和“行内级”布局规则的限制。
- 不再对父元素汇报宽高数据。
- 定位元素内部默认仍然按照标准流布局。

## 静态定位 - static

- `static` 是 `position` 属性的默认值。
- 元素按照标准流进行布局。
- `top`、`right`、`bottom`、`left` 属性无效。

## 相对定位 - relative

- 元素按照 normal flow 布局
- 可以通过 left, right, top, bottom 进行定位
  - 定位 **参照对象** 是元素 **自己原来的位置**
- 相对定位的应用场景: 
  - 在不影响其他元素位置的前提下, 对当前元素位置进行 **微调**

![image-20231224165521909](./assets/image-20231224165521909.png)

## 固定定位 - fixed

- 元素脱离 normal flow(脱离标准流, 脱标)
- 可以通过 left, right, top, bottom 进行定位
- 定位参照对象是 **视口** ，即使页面滚动，元素仍然固定在视口中的位置。

> **视口 Viewport** ：浏览器可视区域，如下图红框所示
>
> **画布 Canvas** ：渲染文档的区域，文档内容超出视口时可以滚动查看，如下图黑框所示

宽高对比: 画布 >= 视口

![image-20231224170143383](./assets/image-20231224170143383.png)

## 绝对定位 - absolute

- 元素脱离标准流，成为脱标元素。
- `top`、`right`、`bottom`、`left` 属性可以用于精确定位。

- 定位参照对象是**最近的已定位祖先元素** （ 即 `position` 不为 `static` 的元素）。

  - 如果没有已定位的祖先元素，则参照对象为视口 viewport。

### 子绝父相

- 在绝大数情况下, 子元素的绝对定位都是相对于父元素进行定位

- 如果不希望父元素脱离标准流，可以让父元素设置 `position: relative`，使其成为定位元素。

- 子元素设置 `position: absolute`，相对于父元素进行定位。

### 绝对定位元素（Absolutely Positioned Element） 

- 绝对定位元素是 `position` 值为 `absolute` 或 `fixed` 的元素。

**对于绝对定位元素：** 

- 定位参照对象的宽度 = `left` + `right` + `margin-left` + `margin-right` + 绝对定位元素的实际宽度。
- 定位参照对象的高度 = `top` + `bottom` + `margin-top` + `margin-bottom` + 绝对定位元素的实际高度。

**如果希望绝对定位元素的宽度和高度与定位参照对象一致，可以设置以下属性：** 

- `left: 0; right: 0; top: 0; bottom: 0; margin: 0;`

如果希望绝对定位元素在定位参照对象中居中显示，可以设置以下属性： 

- `left: 0; right: 0; top: 0; bottom: 0; margin: auto;`
- 另外，还需要设置具体的宽度和高度（宽高应小于定位参照对象的宽高）。

## 粘性定位 - sticky

- `sticky` 是一个备受期待的 CSS 属性。
- 它可以看作是相对定位和固定定位的结合体。
- 被定位的元素初始表现为相对定位，直到滚动到某个阈值。
- 一旦滚动到该阈值，元素的定位方式会转换为固定定位。
- `sticky` 的定位参照对象是最近的滚动祖先元素（即包含视口的滚动容器）。

## position 值对比

| **定位类型**          | **描述**                                                     | **脱离标准流** | **定位元素** | **绝对定位元素** | **定位参照对象**                           | **`top`/`left` 属性** |
| --------------------- | ------------------------------------------------------------ | -------------- | ------------ | ---------------- | ------------------------------------------ | --------------------- |
| `static` - 静态定位   | 默认值，元素按照标准流进行布局                               | 否             | 否           | 否               | 无                                         | 无作用                |
| `relative` - 相对定位 | 元素相对于其原始位置进行偏移                                 | 否             | 是           | 否               | 元素自身原来的位置                         | 有作用                |
| `absolute` - 绝对定位 | 元素脱离标准流，按指定位置定位                               | 是             | 是           | 是               | 最邻近的定位祖先元素（如果没有则参照视口） | 有作用                |
| `fixed` - 固定定位    | 元素脱离标准流，按指定位置定位，参照对象为视口               | 是             | 是           | 是               | 视口                                       | 有作用                |
| `sticky` - 粘性定位   | 元素在滚动到某个阈值时表现为相对定位，达到阈值后变为固定定位 | 部分           | 是           | 是               | 最近的滚动祖先容器（包含视口）             | 有作用                |

## auto 到底是什么?

`800 = 200 + ml0 + mr0 + 0 + 0`

- `auto` 的含义是：**交由浏览器自动处理** 。

- `width:auto;`

  1. 行内非替换元素 - > width: 包裹内容

  2. 块级元素 - > width: 包含块的宽度

  3. 绝对定位元素 - > width: 包裹内容

##  z-index

`z-index` 属性用于设置定位元素的 **层叠顺序** （仅对已定位元素有效）。

- 取值可以是 **正整数、负整数、0**

- 比较原则
  - 如果是兄弟关系
    - z-index 越大, 层叠在越上面
    - z-index 相等, 写在后面的那个元素层叠在上面
  - 如果不是兄弟关系
    - 各自从元素自己以及祖先元素中, 找出最临近的 2 个定位元素进行比较
    - 而且这 2 个定位元素必须有设置 z-index 的具体数值

![image-20231224172429240](./assets/image-20231224172429240.png)
